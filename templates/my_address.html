{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
    .active{
        background-color:#00B2BD !important;
    }
    .btn-primary{
        
        background-color: black;
    }
    .btn-primary:hover{
        background-color:#00B2BD !important;
        
    }
    .btn-success{
        
        background-color:#00B2BD ;
    }
    .btn-success:hover{
        
        background-color: black !important;
        
    }
</style>
<section class="section-conten padding-y bg">

    <div class="container">
        <div class="row">
        <aside class="col-md-3">
            <!--   SIDEBAR   -->
            <ul class="list-group" >
                <a style="color: black !important; " class="list-group-item " href="{% url 'user_dashboard' %}"> My Profile </a>
                <a style="color: black !important;" class="list-group-item " href="{% url 'ordered_details' %}">Recent Bookings</a>
                
               <a style="color: rgb(255, 255, 255) !important;font-weight: bold;" class="list-group-item active" href="{% url 'my_address'%}"> My Addresses </a>
                <a style="color: black !important;" class="list-group-item" href="{% url 'password_otp'%}"> Change Password </a>
            </ul>
            <br>
            <a class="btn btn-primary btn-block" href="{% url 'logout'%}"> <i class="fas fa-sign-out-alt"></i> <span class="text">Log out</span> </a> 
            <!--   SIDEBAR .//END   -->
        </aside>
        <main class="col-md-9">
            
            <!--  -->
            <div id="accordion">
                <div class="card">
                  <div class="card-header" id="headingOne">
                    <h5 class="mb-0">
                      <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        My Addresses
                      </button>
                      <a class="btn btn-primary" style="float: right;" href="{% url 'checkout' %}">Book now</a>
                    </h5>
                  </div>
              
                  <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                    <div class="d-flex justify-content-around ">
                        
                        
                        <div class="container">
                            <div class="row">
                                {% for address in addresses %}
                                
                                <div class="col-12 col-md-4">
                                  <div class="m-5 p-1" style="border-color:black;"><div class="" >
                                    <a href="{% url 'edit_address' address.id %}">Edit</a>
                                    {% if address.default == False %}
                                    <a onclick="deleteAddress(event)" href="{% url 'delete_address' address.id %}">Delete</a>
                                    {% endif %}
                                    <a href="{% url 'set_default' address.id %}">SetDefault</a>
                                </div>
                                {% if address.default %}
                                <h6 style="color: #00B2BD;">Selected</h6>
                                {% endif %}
                                
                                    <h5 class="card-title">{{address.full_name}}</h5>
                                    
                                    <h6 class="card-subtitle mb-2 text-muted">{{address.address_line_1}} , {{address.address_line_2}}</h6>
                                    <p class="card-text">{{address.city}} , {{address.zip_code}} , {{address.state}} ,{{address.country}} , {{address.landmark}} </p>
                                    <a href="#" class="card-link">{{address.mobile}}</a>
                                    
                                   
                                </div>

                                </div>
                               
                                {% endfor %}                                
                            </div>
                        </div>
                        
                        <!-- <div class=" container m-3" style="width: 250px;">
                            <div class="card-body">
                              <h5 class="card-title">{{address.full_name}}</h5>
                              <h6 class="card-subtitle mb-2 text-muted">{{address.address_line_1}} , {{address.address_line_2}}</h6>
                              <p class="card-text">{{address.city}} , {{address.zip_code}} , {{address.state}} ,{{address.country}} , {{address.landmark}} </p>
                              <a href="#" class="card-link">{{address.mobile}}</a>
                              
                            </div>
                            
                            
                        </div> -->
                        
                        
                        

                    </div>
                    
                  </div>
                </div>
                <div class="card">
                  <div class="card-header" id="headingTwo">
                    <h5 class="mb-0">
                      <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Add Address
                      </button>
                    </h5>
                  </div>
                  <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                    <form id="form" method="post" action="{% url 'add_address' %}">
                        {% csrf_token %}
                    <article class="card mb-4">
                        <div class="card-body">
                          <h4 class="card-title mb-4">Address <input type="submit" value="Submit" class="btn btn-success " style="float: right;" name="" id=""></h4>
                          
                              
                          
                            <div class="row">
                                
                                    
                                
                              <div class="form-group col-sm-12">
                                <label>Full Name</label>
                                <input
                                  type="text"
                                  placeholder="Type here"
                                  class="form-control"
                                  name='full_name'
                                />
                              </div>
                              <div class="form-group col-sm-6">
                                <label>Address Line 1</label>
                                <input
                                  type="text"
                                  placeholder="Type here"
                                  class="form-control"
                                  name='address_line_1'
                                />
                              </div>
                              <div class="form-group col-sm-6">
                                <label>Address Line 2</label>
                                <input
                                  type="text"
                                  placeholder="Type here"
                                  class="form-control"
                                  name='address_line_2'
                                />
                              </div>
                              <div class="form-group col-sm-6">
                                <label>City*</label>
                                <input
                                  type="text"
                                  placeholder="Type here"
                                  class="form-control"
                                  name='city'
                                />
                              </div>
                              <div class="form-group col-sm-6">
                                <label>Postal code</label>
                                <input name='zip_code' type="text" placeholder="" class="form-control" />
                                
                              </div>
                              
                              <div class="form-group col-sm-4">
                                <label>State*</label>
                                <input
                                  type="text"
                                  placeholder="Type here"
                                  class="form-control"
                                  name='state'
          
                                />
                              </div>
                              <div class="form-group col-sm-4">
                                <label>Country*</label>
                                <select name="country" class="form-control">
                                  <option value="India">India</option>
                                  <option value="United States">United States</option>
                                  <option value="France">France</option>
                                  <option value="Italy">Italy</option>
                                </select>
                              </div>
                              <div class="form-group col-sm-4">
                                <label>Mobile</label>
                                <input name='mobile' type="text" placeholder="" class="form-control" />
                              </div>
                              
                             
                              <div class="form-group col-sm-12">
                                <label>Landmark</label>
                                <input name='landmark' type="text" placeholder="" class="form-control" />
                              </div>
                             
                              
                              
                            </div>
                            <!-- row.// -->
                          
                        </div>
                        <!-- card-body.// -->
                      </article>
                    </form>
                  </div>
                </div>
                
              </div>
            
        </main>
    </div> <!-- row.// -->
    </div>
    
    
    </section>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
        function deleteAddress(ev) {
            ev.preventDefault();
            var urlToRedirect = ev.currentTarget.getAttribute('href'); //use currentTarget because the click may be on the nested i tag and not a tag causing the href to be empty
            
            swal({
              title: "Are you sure?",
              text: "",
              icon: "warning",
              buttons: true,
              dangerMode: true,
            })
            .then((willDelete) => {
              // redirect with javascript here as per your logic after showing the alert using the urlToRedirect value
              if (willDelete) {
                swal("Poof! Your Address has been deleted!", {
                  icon: "success",
                });
                window.location.href = urlToRedirect;
              } else {
                swal("No changes..");
              }
            });
            console.log(urlToRedirect); // verify if this is the right URL
            console.log("-----------------------")
            
            }
    </script>
    

{% endblock%}
